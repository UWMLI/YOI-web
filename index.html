<html>
<head>
<title>Notebook</title>
<link rel='stylesheet' type='text/css' href='css.css' />
<link rel="stylesheet" type="text/css" href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script type="text/javascript" src="utils/json2.js"></script>
<script type="text/javascript" src="utils/server-conf.js"></script>
<script type="text/javascript" src="utils/nbutils.js"></script>
<script type="text/javascript" src="views.js"></script>
<script type="text/javascript" src="model.js"></script>
<script type="text/javascript" src="controller.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script type="text/javascript" src="utils/richmarker.js" ></script>
<script type="text/javascript" src="utils/markerclusterer.js"></script>
<script src="utils/recorder.js"></script>
<script type="text/javascript">

window.addEventListener('load', pageLoad, false);

//Defining here to make available to everyone
var model;
var controller;

function pageLoad()
{
    //Initialize stuff
    controller = new Controller();
    model = new Model();
    startLoadGame();

    if(navigator.appName == 'Microsoft Internet Explorer') alert('You might need to install quicktime to properly view some media.\n(http://www.apple.com/quicktime/download)');
}

function startLoadGame()
{
    document.getElementById('message').innerHTML = "&nbsp; <img height='12px' src='assets/images/spinner.gif'></img> Waiting on Server...";
    callService("players.getPlayerBackpacksFromArray", finishLoadGame, '', JSON.stringify({ "gameId":model.gameId, "items":false, "attributes":false}));
}

function finishLoadGame(responseText)
{
    responseData=JSON.parse(responseText);
    if(responseData.returnCode == 1) //Error
    {
        document.getElementById('message').innerHTML = responseData.data;	
        return;
    }

    document.getElementById('message').innerHTML = "";

    model.gameJSONText = responseText;
    model.gameData = responseData.data;

    controller.populateModel(model.gameData);

    //  Set actual page visible
    document.getElementById('message').style.display = 'none';
    document.getElementById('content').style.display = 'block';

    google.maps.event.trigger(model.views.gmap, 'resize'); // To fix google maps incorrect sizing bug
}

</script>
</head>
<body id='body'>
<div id='message'></div>

<div id='content'>

<!-- Main View -->
<div id='main_view_full' class='main_view'>
    <div id='main_view_left'  class='main_view'></div>
    <div id='main_view_right' class='main_view'>
        <div id='main_view_map' class='main_view'></div>
        <div id='main_view_info'>
            Tags:<br />
            <input id="tag1" value="Innovation"          type="checkbox" checked="checked" onchange="controller.repopulateAll()">Innovation         </input><br />
            <input id="tag2" value="Stories of the Past" type="checkbox" checked="checked" onchange="controller.repopulateAll()">Stories of the Past</input><br />
            <input id="tag3" value="Madison Culture"     type="checkbox" checked="checked" onchange="controller.repopulateAll()">Madison Culture    </input><br />
            <input id="tag4" value="Must Do"             type="checkbox" checked="checked" onchange="controller.repopulateAll()">Must Do            </input><br />
            <input id="tag5" value="100 Years from Now"  type="checkbox" checked="checked" onchange="controller.repopulateAll()">100 Years from Now </input><br />
            <br />
            <span>Search:<input id="filterbox" type="text" onchange="controller.repopulateAll()"/></span>
            <br /><br /><br />
            <button onClick="JavaScript:controller.createNote()" class="button">Upload</button>
        </div>
    </div>
</div>

<div id='note_view_container'        class='container'></div>
<div id='create_note_view_container' class='container'></div>
<div id='login_view_container'       class='container'></div>
<div id='join_view_container'        class='container'></div>

<!-- HTML CONSTRUCTIONS OF REUSABLE NODES -->
<!-- These will never be seen. This is simply an area to construct nodes in raw html rather than dealing with doing so in javascript. From here, nodes can be accessed by their ID's, cloned, and renamed. -->
<div id='constructs'>

<!-- Close Buttons (?) --><!-- NOT re-used. Just put here so they don't show up, I guess? -->
<div id='note_view_close_button'        class='close_button'>X</div>
<div id='create_note_view_close_button' class='close_button'>X</div>
<div id='login_view_close_button'       class='close_button'>X</div>
<div id='join_view_close_button'        class='close_button'>X</div>

<!-- Create Note View -->
<div id='note_create_view_construct' class='note_create_view'>
    <div id='note_create_view_left_construct' class='note_create_view_left'>
        <div id='note_create_view_image_construct' class='note_create_view_image'>Image:</div>
        <div id='note_create_view_location_construct' class='note_create_view_location'>Location:</div>
    </div>
    <div id='note_create_view_right_construct' class='note_create_view_right'>
        <div id='note_create_view_caption_construct' class='note_create_view_caption'>Caption:</div>
        <div id='note_create_view_tagsaudio_construct' class='note_create_view_tagsaudio'>
            <div id='note_create_view_tags_construct' class='note_create_view_tags'>Tags:</div>
            <div id='note_create_view_audio_construct' class='note_create_view_audio'>Audio:</div>
        </div>
        <div id='note_create_view_submit_construct' class='note_create_view_submit'>Submit:</div>
    </div>
</div>

<!-- Login View -->
<div id='login_view_construct' class='login_view'>
    <div id='login_view_top_construct' class='login_view_top'>Log In</div>
    <div id='login_view_bottom_construct' class='login_view_bottom'></div>
</div>

<!-- Join View -->
<div id='join_view_construct' class='join_view'>
    <div id='join_view_top_construct' class='join_view_top'>Join</div>
    <div id='join_view_bottom_construct' class='join_view_bottom'></div>
</div>

<!-- Note View -->
<div id='note_view_construct' class='note_view'>
    <div id='note_view_left_construct' class='note_view_left'></div>
    <div id='note_view_right_construct' class='note_view_right'>
        <div id='note_view_info_construct' class='note_view_info'></div>
        <div id='note_view_caption_construct' class='note_view_captions'></div>
        <div id='note_view_comments_construct' class='note_view_comments'></div>
        <div id='note_view_input_construct' class='note_view_input'></div>
    </div>
</div>

<!-- Note Content Cell -->
<div id='note_content_cell_construct' class='note_content_cell'></div>

<!-- Note Comment Cell -->
<div id='note_comment_cell_construct' class='note_comment_cell'>
<div id='note_comment_cell_header_construct' class='note_comment_cell_header note_view_owner'></div>
</div>

</div>

</body>
</html>
